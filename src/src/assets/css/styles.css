/* =========================================
   1. å…¨å±€é…ç½®ä¸å˜é‡ (:root & Base)
   ========================================= */
:root {
  /* --- å“ç‰Œè‰²ä¸ä¸»é¢˜è‰² (Nikon Theme) --- */
  --nikon-yellow: #ffe100;
  --bg-color: #121212;      /* å…¨å±€èƒŒæ™¯åŠ æ·± */
  --panel-bg: #1a1a1a;      /* é¢æ¿èƒŒæ™¯ */
  --input-bg: #2c2c2c;      /* è¾“å…¥æ¡†èƒŒæ™¯ */
  --text-main: #e0e0e0;
  --text-sub: #aaaaaa;
  --border-color: #333333;
  --border-focus: #555555;

  /* --- çŠ¶æ€é¢œè‰² --- */
  --status-ok-bg: rgba(102, 187, 106, 0.15);
  --status-ok-text: #66bb6a;
  --status-no-bg: rgba(183, 28, 28, 0.4);
  --status-no-text: #ffcdd2;
  --progress-green: #4caf50;

  /* --- å­—ä½“è®¾ç½® --- */
  font-family: "Inter", "Noto Sans SC", "Segoe UI", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 1.5;
  font-weight: 400;

  /* å¼ºåˆ¶æ·±è‰²æ¨¡å¼ */
  color-scheme: dark;
  color: var(--text-main);
  background-color: var(--bg-color);

  /* æ¸²æŸ“ä¼˜åŒ– */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ğŸŸ¢ æ ¸å¿ƒé‡ç½®ï¼šæ’‘æ»¡çª—å£ï¼Œç§»é™¤é»˜è®¤è¾¹è· */
html, body, #app {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden; /* ç¦æ­¢åŸç”Ÿæ»šåŠ¨æ¡ï¼Œç”±å†…éƒ¨é¢æ¿æ¥ç®¡ */
  display: block;   /* ç§»é™¤ flex å±…ä¸­ */
}

* { box-sizing: border-box; }

/* ç¦æ­¢å›¾ç‰‡æ‹–æ‹½ */
img {
  -webkit-user-drag: none;
  user-select: none;
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡ (é€‚ç”¨äºæ‰€æœ‰ overflow å®¹å™¨) */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #555; }
::-webkit-scrollbar-corner { background: transparent; }

/* =========================================
   2. åŸºç¡€å…ƒç´ æ ·å¼ (Elements)
   ========================================= */

/* è¾“å…¥æ¡†ä¸ Select ç»Ÿä¸€ */
select, input[type="text"], input[type="number"] {
  width: 100%;
  height: 36px; /*ç¨å¾®æ”¹å°ä¸€ç‚¹ï¼Œé€‚åº”ç´§å‡‘å¸ƒå±€ */
  padding: 0 10px;
  background-color: var(--input-bg);
  color: #fff;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 0.9em;
  font-family: inherit;
  outline: none;
  transition: all 0.2s ease;
  appearance: none;
}

/* Select è‡ªå®šä¹‰ç®­å¤´ */
select {
  padding-right: 30px;
  cursor: pointer;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 14px;
}

select:hover, input:hover {
  border-color: var(--border-focus);
  background-color: #333;
}

select:focus, input:focus {
  border-color: var(--nikon-yellow);
  box-shadow: 0 0 0 1px rgba(255, 225, 0, 0.1);
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffe100' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
}

/* Label æ ·å¼ */
label {
  font-size: 0.85em;
  color: var(--text-sub);
  margin-bottom: 4px;
  display: block;
  font-weight: 500;
}

/* Range æ»‘å—æ ·å¼ä¼˜åŒ– */
input[type=range] {
  -webkit-appearance: none; 
  background: transparent;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 14px; width: 14px;
  border-radius: 50%;
  background: var(--nikon-yellow);
  cursor: pointer;
  margin-top: -5px; 
}
input[type=range]::-webkit-slider-runnable-track {
  width: 100%; height: 4px;
  background: #444;
  border-radius: 2px;
}
input[type=range]:focus::-webkit-slider-runnable-track {
  background: #555;
}

/* =========================================
   3. æŒ‰é’®æ ·å¼ (Buttons)
   ========================================= */

/* æ¬¡çº§æŒ‰é’® (ç°è‰²è¾¹æ¡†) */
.secondary-btn {
  background: transparent;
  color: #bbb;
  border: 1px solid var(--border-color);
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85em;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}
.secondary-btn:hover {
  border-color: #666;
  color: #fff;
  background: rgba(255,255,255,0.05);
}
.secondary-btn.active {
  background: #333;
  color: var(--nikon-yellow);
  border-color: var(--nikon-yellow);
}

/* å±é™©æŒ‰é’® (çº¢è‰²) */
.danger-btn {
  border-color: #522;
  color: #d66;
}
.danger-btn:hover {
  border-color: #d44;
  color: #f55;
  background: rgba(255, 68, 68, 0.1);
}

/* ä¸»æ“ä½œæŒ‰é’® (é»„è‰²å®å¿ƒ) */
.primary-btn {
  background-color: var(--nikon-yellow);
  color: #000;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  transition: filter 0.2s;
}
.primary-btn:hover:not(:disabled) {
  filter: brightness(1.1);
}
.primary-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  filter: grayscale(1);
}

/* =========================================
   4. åˆ—è¡¨ä¸æ‹–æ‹½ (File List & Drop Zone)
   ========================================= */

/* æ–‡ä»¶åˆ—è¡¨å®¹å™¨ */
.file-list {
  display: flex;
  flex-direction: column;
  /* ç§»é™¤åŸæ¥çš„ borderï¼Œå› ä¸º Panel å·²ç»æœ‰èƒŒæ™¯äº† */
}

/* åˆ—è¡¨é¡¹ */
.file-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  font-size: 0.85em;
  background: transparent;
  transition: background 0.1s;
}
.file-item:last-child { border-bottom: none; }
.file-item:hover { 
  background-color: rgba(255,255,255,0.05); 
}

/* åˆ—è¡¨åºå· */
.file-index {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  height: 18px;
  margin-right: 8px;
  background-color: rgba(255,255,255,0.1);
  color: #888;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 600;
  padding: 0 4px;
}
.file-item:hover .file-index {
  background-color: var(--nikon-yellow);
  color: #000;
}

/* æ–‡ä»¶å */
.file-name {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: #ddd;
  margin-right: 10px;
}

/* åˆ é™¤æŒ‰é’® */
.del-btn {
  background: none; border: none; 
  color: #555; cursor: pointer;
  font-size: 16px; padding: 4px;
  line-height: 1;
}
.del-btn:hover { color: #ff4d4d; }

/* 1. å®¹å™¨çŠ¶æ€ï¼šå½“æ¿€æ´»æ—¶ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªå®šä½é”šç‚¹ */
.drag-active {
  position: relative !important;
  /* ç§»é™¤å®¹å™¨æœ¬èº«çš„è¾¹æ¡†å˜è‰²ï¼Œé˜²æ­¢å’Œä¼ªå…ƒç´ è¾¹æ¡†é‡å  */
  /* border-color: transparent !important; */
}

/* 2. ä¼ªå…ƒç´ ï¼šè´Ÿè´£æ‰€æœ‰çš„è§†è§‰æ•ˆæœï¼ˆèƒŒæ™¯ã€è™šçº¿ã€æ–‡å­—ï¼‰ */
.drag-active::after {
  content: "é‡Šæ”¾æ·»åŠ å›¾ç‰‡";
  
  /* ç»å¯¹å®šä½æ’‘æ»¡å®¹å™¨ */
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  
  /* è§†è§‰æ ·å¼ */
  background: rgba(26, 26, 26, 0.9); /* æ·±è‰²èƒŒæ™¯é®ç›–åˆ—è¡¨ */
  border: 2px dashed var(--nikon-yellow); /* é»„è‰²è™šçº¿ */
  color: var(--nikon-yellow);
  
  /* å¸ƒå±€ */
  display: flex;
  align-items: center;
  justify-content: center;
  
  /* å­—ä½“ */
  font-size: 1.1em;
  font-weight: bold;
  letter-spacing: 1px;
  
  /* äº¤äº’ */
  pointer-events: none; /* è®©é¼ æ ‡ç©¿é€ */
  z-index: 50;
  backdrop-filter: blur(4px);
  
  /* ğŸŸ¢ å…³é”®ï¼šæ·»åŠ è¿›å…¥åŠ¨ç”» */
  animation: fadeIn 0.2s ease-out forwards;
}

/* å®šä¹‰æ·¡å…¥åŠ¨ç”» */
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

/* =========================================
   5. çŠ¶æ€å¾½ç«  (Badges)
   ========================================= */
.tag-exif {
  font-family: inherit;
  font-size: 9px;
  font-weight: 700;
  padding: 1px 4px;
  border-radius: 2px;
  text-transform: uppercase;
  margin-left: 6px;
  vertical-align: middle;
}
.tag-exif.ok { color: var(--status-ok-text); background-color: var(--status-ok-bg); }
.tag-exif.no { color: var(--status-no-text); background-color: var(--status-no-bg); }

/* =========================================
   6. åŠ è½½åŠ¨ç”» (Spinners)
   ========================================= */
.spinner {
  width: 18px; height: 18px;
  border: 2px solid #555;
  border-top-color: var(--nikon-yellow);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  box-sizing: border-box;
}
@keyframes spin { to { transform: rotate(360deg); } }